from django.shortcuts import render
from django.http import HttpResponse, HttpResponseRedirect
from django.urls import reverse
from bs4 import BeautifulSoup
from django.template import loader
import requests
import sys

def index(request):
    return HttpResponse("Hello Home page")


	
def form(request):
    template = loader.get_template('form.html')
    test = 'hello world'
    context = {
        'test': test,
		'test2': "hello Africa"
    }
    return HttpResponse(template.render(context, request))

  
def rss(request): 
    link = request.POST['link']
    url = requests.get(link)
    soup = BeautifulSoup(url.content, 'xml')
    items = soup.find_all('item')

    response = ""
    for item in items:
        title = item.title.text
        description = item.description.text
        response += "<h1 style='color:red'>" + title + "</h1><br><h2>" + description + "</h2>" + "<br>"
    return HttpResponse(response)
